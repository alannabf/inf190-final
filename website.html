<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
    <div class="header">
        <!-- title -->
        <h1>Make Music!</h1>
    </div>

<!-- Selecting song -->
    <div class="SongSelection">
 
        <h3>Select Songs:</h3> 

        <!--choose bass-->
        <div class="Songs">
            <label for="SongSelection">Choose a Bass:</label>
            <select name="Bass" id="Bass">
                <option value="kalachashma_bass">Kala Chashma Bass</option> <!--Kala Chashma_Bass_mixed.mp3-->
                <option value="sprinter_bass">Sprinter Bass</option>
                <option value="runaway_bass">Runaway Bass</option>
                <option value="lovestory_bass">Love Story Bass</option>
                <option value="dshstar_bass+other">Dashstar Bass</option>
                <option value="None">None</option>
            </select>
        </div>

        <!--choose drums-->
        <div class="Songs">
            <label for="SongSelection">Choose a Drums:</label>
            <select name= "Drums" id="Drums">
                <option value="kalachashma_drums">Kala Chashma Drum</option> <!--Kala Chashma_Drums_mixed.mp3-->
                <option value="sprinter_drums">Sprinter Drum</option>
                <option value="runaway_drums">Runaway Drum</option>
                <option value="lovestory_drums">Love Story Drum</option>
                <option value="dshstar_drums">Dashstar Drum</option>
                <option value="myeyes_drums">My Eyes Drum</option>
                <option value="None">None</option>
            </select>
        </div>

        <!--choose guitar-->
        <div class="Songs">
            <label for="SongSelection">Choose a Guitar/Piano:</label>
            <select name="Guitar/Piano" id="Guitar">
                <option value="kalachashma_guitar+other">Kala Chashma Guitar</option> <!--Kala Chashma_Drums_mixed.mp3-->
                <option value="sprinter_guitar">Sprinter Guitar</option>
                <option value="runaway_piano+other">Runaway Piano</option>
                <option value="lovestory_guitar+others">Love Story Guitar</option>
                <option value="myeyes_piano">My Eyes Piano</option>
                <option value="None">None</option>
            </select>
        </div>

        <div class="Songs">
        <!--choose Vocals-->
            <label for="SongSelection">Choose a Vocals:</label>
            <select name="Vocals" id="Vocals">
                <option value="kalachashma_vocals">Kala Chashma Vocals</option> <!--Kala Chashma_Drums_mixed.mp3-->
                <option value="sprinter_vocals">Sprinter Vocals</option>
                <option value="runaway_vocals">Runaway Vocals</option>
                <option value="lovestory_vocals">Love Story Vocals</option>
                <option value="dshstar_vocals">Dashstar Vocals</option>
                <option value="myeyes_vocals">My Eyes Vocals</option>
                <option value="None">None</option>
            </select>
        </div>
        <!-- Existing HTML elements for sound selection -->

    <!-- Insert the Confirm Selection Button after the dropdowns -->
    <div class="button">
        <button id="confirmSelection">Confirm Selection</button>
        <button id="startAll">Start All</button>
        <button id="pauseAll">Pause All</button>
    </div>  

    <div id="audioContainer"> </div>

    <script type="text/javascript">
        
        // Function to load and prepare sound files based on user selections
        function prepareSoundFiles() {
            // Get user selections from dropdowns
            const bassSelection = document.getElementById('Bass').value.replace(/ /g, "_") + ".mp3";
            const drumsSelection = document.getElementById('Drums').value.replace(/ /g, "_") + ".mp3";
            const guitarSelection = document.getElementById('Guitar').value.replace(/ /g, "_") + ".mp3";
            const vocalsSelection = document.getElementById('Vocals').value.replace(/ /g, "_") + ".mp3";
            
            // Function to create or update audio elements for the selected files
            updateAudioSource('audioBass', bassSelection);
            updateAudioSource('audioDrums', drumsSelection);
            updateAudioSource('audioGuitar', guitarSelection);
            updateAudioSource('audioVocals', vocalsSelection);
        }


    function updateAudioSource(audioId, src) {
            let audioElement = document.getElementById(audioId);
            let container = document.getElementById('audioContainer'); // Get the container
            // If the audio element does not exist, create it
            if (!audioElement) {
                audioElement = document.createElement('audio');
                audioElement.id = audioId;
                audioElement.controls = true;
                container.appendChild(audioElement); // Append to the container
            }
            audioElement.src = 'sounds/' + src;
        }

        // Ensure this script runs after the document has loaded, or place the <script> tag at the end of the body
        document.getElementById('confirmSelection').addEventListener('click', prepareSoundFiles);

        // Check if the audio element has a source set
        document.getElementById('startAll').addEventListener('click', function() {
            const audioElements = document.querySelectorAll('audio');
            audioElements.forEach(audio => {
                if (audio.src) { 
                audio.play();
                }
            });
        });

        // Pause playback without resetting the position
        document.getElementById('pauseAll').addEventListener('click', function() {
        const audioElements = document.querySelectorAll('audio');
            audioElements.forEach(audio => {
                audio.pause(); 
                });
        });

</script>
   
    </div>
    <!-- Existing script for drawing sound waves -->


</body>



</html>
